# ETCD 注册中心示例

本示例展示了如何使用 Blade 框架的 ETCD 注册中心组件进行服务注册、发现和监听。

## 前置条件

1. 安装并启动 ETCD 服务
```bash
# MacOS
brew install etcd
brew services start etcd

# Docker
docker run -d \
  --name etcd \
  -p 2379:2379 \
  -p 2380:2380 \
  gcr.io/etcd-development/etcd:v3.5.0
```

2. 安装依赖
```bash
go mod tidy
```

## 运行示例

```bash
go run main.go
```

## 功能演示

1. 服务注册
   - 示例程序会注册一个示例服务实例
   - 服务实例包含 ID、名称、版本、元数据和端点信息
   - 使用 TTL 机制自动维护服务心跳

2. 服务发现
   - 可以通过服务名称查询服务实例列表
   - 返回的服务实例包含完整的服务信息

3. 服务监听
   - 支持实时监听服务列表变更
   - 当有服务注册或注销时会收到通知

4. 优雅退出
   - 监听系统中断信号
   - 在退出前自动注销服务

## 测试服务发现

1. 启动多个示例程序实例：
```bash
# 终端 1
go run main.go

# 终端 2 (修改服务 ID 后运行)
go run main.go
```

2. 观察服务发现和监听结果
   - 每个实例都会打印发现的服务列表
   - 当有新服务注册或现有服务注销时，会收到通知

3. 测试服务注销
   - 按 Ctrl+C 终止其中一个实例
   - 观察其他实例收到的服务变更通知 